
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uzak Sistem Yönetimi</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/navbar.css">
    <link rel="stylesheet" href="/css/remote.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">
                <circle cx="12" cy="12" r="3"/>
                <path d="M12 1v6m0 6v6m5.5-11.5l-11 11m0-11l11 11"/>
            </svg>
            Uzak Sistem Yönetimi
            <span class="ip-badge" id="localIp"></span>
        </div>
        <div class="nav-links"></div>
    </nav>

    <div class="main-container">
        <!-- Sol Panel - Bağlantı Bilgileri -->
        <div class="sidebar">
            <div class="connection-card">
                <div class="card-header">
                    <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="8.5" cy="7" r="4"/>
                        <polyline points="17 11 19 13 23 9"/>
                    </svg>
                    <h2>Bağlantı Bilgileri</h2>
                </div>
                
                <div class="connection-form">
                    <div class="input-group">
                        <label for="ipAddress">
                            <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="2" width="20" height="8" rx="2" ry="2"/>
                                <rect x="2" y="14" width="20" height="8" rx="2" ry="2"/>
                                <line x1="6" y1="6" x2="6.01" y2="6"/>
                                <line x1="6" y1="18" x2="6.01" y2="18"/>
                            </svg>
                            IP Adresi
                        </label>
                        <input type="text" id="ipAddress" placeholder="192.168.1.100" autocomplete="off">
                    </div>

                    <div class="input-group">
                        <label for="username">
                            <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                <circle cx="12" cy="7" r="4"/>
                            </svg>
                            Kullanıcı Adı
                        </label>
                        <input type="text" id="username" placeholder="admin" autocomplete="off">
                    </div>

                    <div class="input-group">
                        <label for="password">
                            <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                            </svg>
                            Şifre
                        </label>
                        <input type="password" id="password" placeholder="••••••••">
                    </div>

                    <button class="connect-button" onclick="connectSystem()">
                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="16 16 12 12 8 16"/>
                            <line x1="12" y1="12" x2="12" y2="21"/>
                            <path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"/>
                        </svg>
                        Bağlantıyı Test Et
                    </button>
                </div>

                <div class="connection-status" id="connectionStatus">
                    <div class="status-indicator status-disconnected"></div>
                    <span>Bağlantı Bekleniyor</span>
                </div>
            </div>

            <!-- Hızlı Sistem Bilgisi -->
            <div class="quick-info-card">
                <h3>Sistem Durumu</h3>
                <div class="quick-stats">
                    <div class="stat-item">
                        <span class="stat-label">Bağlantı Tipi</span>
                        <span class="stat-value" id="connectionType">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Yanıt Süresi</span>
                        <span class="stat-value" id="responseTime">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Son Bağlantı</span>
                        <span class="stat-value" id="lastConnection">-</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ana İçerik Alanı -->
        <div class="content-area">
            <!-- Üst Menü Sekmeleri -->
            <div class="tab-navigation">
                <button class="tab-btn active" data-tab="ssh" onclick="switchTab('ssh')">
                    <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="4 17 10 11 4 5"/>
                        <line x1="12" y1="19" x2="20" y2="19"/>
                    </svg>
                    SSH Terminal
                </button>
                <button class="tab-btn" data-tab="rdp" onclick="switchTab('rdp')">
                    <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                        <line x1="8" y1="21" x2="16" y2="21"/>
                        <line x1="12" y1="17" x2="12" y2="21"/>
                    </svg>
                    RDP Masaüstü
                </button>
                <button class="tab-btn" data-tab="network" onclick="switchTab('network')">
                    <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="2"/>
                        <path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"/>
                    </svg>
                    Ağ Taraması
                </button>
                <button class="tab-btn" data-tab="metrics" onclick="switchTab('metrics')">
                    <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="20" x2="12" y2="10"/>
                        <line x1="18" y1="20" x2="18" y2="4"/>
                        <line x1="6" y1="20" x2="6" y2="16"/>
                    </svg>
                    Sistem Metrikleri
                </button>
            </div>

            <!-- SSH Terminal Paneli -->
            <div class="tab-content active" id="sshPanel">
                <div class="panel-header">
                    <h2>SSH Terminal</h2>
                    <div class="panel-actions">
                        <button class="action-btn" onclick="clearTerminal()" title="Terminali Temizle">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="1 4 1 10 7 10"/>
                                <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
                            </svg>
                        </button>
                        <button class="action-btn" onclick="copyTerminalOutput()" title="Çıktıyı Kopyala">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <div class="terminal-container">
                    <div class="terminal-output" id="terminalOutput">
                        <div class="terminal-welcome">
                            <pre>╔═══════════════════════════════════════════════════════╗
║         SSH Terminal - Uzak Sistem Yönetimi         ║
╚═══════════════════════════════════════════════════════╝</pre>
                            <p>Bağlantı bilgilerini girin ve komut çalıştırmaya başlayın.</p>
                        </div>
                    </div>
                    
                    <div class="terminal-input-area">
                        <div class="terminal-prompt">
                            <span class="prompt-symbol">$</span>
                            <input type="text" 
                                   id="sshCommand" 
                                   class="terminal-input" 
                                   placeholder="Komut girin (örn: ls -la, pwd, cat file.txt)"
                                   autocomplete="off">
                        </div>
                        <div class="terminal-options">
                            <label class="checkbox-label">
                                <input type="checkbox" id="sudoCommand">
                                <span>Sudo ile çalıştır</span>
                            </label>
                            <button class="send-btn" onclick="sendSSHCommand()">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="22" y1="2" x2="11" y2="13"/>
                                    <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                                </svg>
                                Gönder
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RDP Paneli -->
            <div class="tab-content" id="rdpPanel">
                <div class="panel-header">
                    <h2>Uzak Masaüstü Bağlantısı (RDP)</h2>
                </div>
                
                <div class="rdp-content">
                    <div class="rdp-info-section">
                        <div class="info-card">
                            <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <line x1="12" y1="16" x2="12" y2="12"/>
                                <line x1="12" y1="8" x2="12.01" y2="8"/>
                            </svg>
                            <div>
                                <h3>RDP Hakkında</h3>
                                <p>Windows uzak masaüstü protokolü kullanarak hedef sisteme tam görsel erişim sağlar.</p>
                            </div>
                        </div>
                    </div>

                    <div class="rdp-credentials-section">
                        <h3>Bağlantı Bilgileri</h3>
                        <div class="credentials-grid">
                            <div class="credential-item">
                                <label>IP Adresi</label>
                                <div class="credential-value">
                                    <input type="text" id="rdpIp" readonly>
                                    <button onclick="copyToClipboard('rdpIp')" class="copy-btn" title="Kopyala">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="credential-item">
                                <label>Kullanıcı Adı</label>
                                <div class="credential-value">
                                    <input type="text" id="rdpUsername" readonly>
                                    <button onclick="copyToClipboard('rdpUsername')" class="copy-btn" title="Kopyala">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="credential-item">
                                <label>Şifre</label>
                                <div class="credential-value">
                                    <input type="password" id="rdpPassword" readonly>
                                    <button onclick="togglePasswordVisibility('rdpPassword')" class="copy-btn" title="Göster/Gizle">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                            <circle cx="12" cy="12" r="3"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="rdp-actions">
                        <button class="rdp-connect-btn" onclick="startRDP()">
                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                                <line x1="8" y1="21" x2="16" y2="21"/>
                                <line x1="12" y1="17" x2="12" y2="21"/>
                            </svg>
                            RDP Bağlantısını Başlat
                        </button>
                        <p class="rdp-note">* RDP bağlantısı için 3389 portuna erişiminizin olması gerekmektedir.</p>
                    </div>
                </div>
            </div>

            <!-- Ağ Taraması Paneli -->
            <div class="tab-content" id="networkPanel">
                <div class="panel-header">
                    <h2>Ağ Taraması</h2>
                    <div class="panel-actions">
                        <button class="action-btn" onclick="exportScanResults()" title="Sonuçları Dışa Aktar">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="network-scan-content">
                    <div class="scan-controls">
                        <div class="input-group">
                            <label for="scanIpAddress">
                                <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="2"/>
                                    <path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"/>
                                </svg>
                                IP Adresi veya Ağ Aralığı
                            </label>
                            <input type="text" id="scanIpAddress" placeholder="192.168.1.0/24 veya 192.168.1.1">
                        </div>
                        <button class="scan-button" onclick="startNetworkScan()">
                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"/>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                            </svg>
                            Taramayı Başlat
                        </button>
                    </div>

                    <div class="scan-status" id="scanStatus">
                        <div class="status-header">
                            <svg class="status-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                            <span id="currentStatus">Tarama bekleniyor...</span>
                        </div>
                        <div class="progress-container" id="progressContainer" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill" id="scanProgress"></div>
                            </div>
                            <span class="progress-text" id="progressText">0%</span>
                        </div>
                    </div>

                    <div class="scan-results">
                        <div class="results-header">
                            <h3>Tarama Sonuçları</h3>
                            <div class="results-summary">
                                <span class="summary-item">
                                    <span class="summary-label">Toplam:</span>
                                    <span class="summary-value" id="totalHosts">0</span>
                                </span>
                                <span class="summary-item active">
                                    <span class="summary-label">Aktif:</span>
                                    <span class="summary-value" id="activeHosts">0</span>
                                </span>
                                <span class="summary-item inactive">
                                    <span class="summary-label">Pasif:</span>
                                    <span class="summary-value" id="inactiveHosts">0</span>
                                </span>
                            </div>
                        </div>
                        
                        <div class="table-container">
                            <table class="results-table">
                                <thead>
                                    <tr>
                                        <th>IP Adresi</th>
                                        <th>Durum</th>
                                        <th>Yanıt Süresi (ms)</th>
                                        <th>Performans</th>
                                        <th>İşlemler</th>
                                    </tr>
                                </thead>
                                <tbody id="scanResults">
                                    <tr class="no-results">
                                        <td colspan="5">Henüz tarama yapılmadı</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sistem Metrikleri Paneli -->
            <div class="tab-content" id="metricsPanel">
                <div class="panel-header">
                    <h2>Uzak Sistem Metrikleri</h2>
                    <div class="panel-actions">
                        <button class="action-btn" onclick="refreshMetrics()" title="Yenile">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10"/>
                                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card-new">
                        <div class="metric-header">
                            <svg class="metric-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="2" width="20" height="8" rx="2" ry="2"/>
                                <rect x="2" y="14" width="20" height="8" rx="2" ry="2"/>
                                <line x1="6" y1="6" x2="6.01" y2="6"/>
                                <line x1="6" y1="18" x2="6.01" y2="18"/>
                            </svg>
                            <h3>RAM Kullanımı</h3>
                        </div>
                        <div class="metric-value">
                            <span class="value-large" id="remoteRamValue">0%</span>
                        </div>
                        <div class="metric-bar">
                            <div class="metric-bar-fill" id="remoteRamBar" style="width: 0%"></div>
                        </div>
                        <div class="metric-details" id="remoteRamDetails">0 MB / 0 MB</div>
                    </div>

                    <div class="metric-card-new">
                        <div class="metric-header">
                            <svg class="metric-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="4" y="4" width="16" height="16" rx="2" ry="2"/>
                                <rect x="9" y="9" width="6" height="6"/>
                                <line x1="9" y1="1" x2="9" y2="4"/>
                                <line x1="15" y1="1" x2="15" y2="4"/>
                                <line x1="9" y1="20" x2="9" y2="23"/>
                                <line x1="15" y1="20" x2="15" y2="23"/>
                                <line x1="20" y1="9" x2="23" y2="9"/>
                                <line x1="20" y1="14" x2="23" y2="14"/>
                                <line x1="1" y1="9" x2="4" y2="9"/>
                                <line x1="1" y1="14" x2="4" y2="14"/>
                            </svg>
                            <h3>CPU Kullanımı</h3>
                        </div>
                        <div class="metric-value">
                            <span class="value-large" id="remoteCpuValue">0%</span>
                        </div>
                        <div class="metric-bar">
                            <div class="metric-bar-fill cpu" id="remoteCpuBar" style="width: 0%"></div>
                        </div>
                        <div class="metric-details" id="remoteCpuDetails">0 çekirdek</div>
                    </div>

                    <div class="metric-card-new">
                        <div class="metric-header">
                            <svg class="metric-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <ellipse cx="12" cy="5" rx="9" ry="3"/>
                                <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/>
                                <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/>
                            </svg>
                            <h3>Disk Kullanımı</h3>
                        </div>
                        <div class="metric-value">
                            <span class="value-large" id="remoteDiskValue">0%</span>
                        </div>
                        <div class="metric-bar">
                            <div class="metric-bar-fill disk" id="remoteDiskBar" style="width: 0%"></div>
                        </div>
                        <div class="metric-details" id="remoteDiskDetails">0 GB / 0 GB</div>
                    </div>

                    <div class="metric-card-new">
                        <div class="metric-header">
                            <svg class="metric-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="2"/>
                                <path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"/>
                            </svg>
                            <h3>Ağ Kullanımı</h3>
                        </div>
                        <div class="metric-stats">
                            <div class="stat-row">
                                <span class="stat-label">↓ İndirme:</span>
                                <span class="stat-value" id="networkDownload">0 KB/s</span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-label">↑ Yükleme:</span>
                                <span class="stat-value" id="networkUpload">0 KB/s</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="system-info-section">
                    <h3>Sistem Bilgileri</h3>
                    <div class="system-info-grid">
                        <div class="info-item">
                            <span class="info-label">İşletim Sistemi:</span>
                            <span class="info-value" id="osInfo">-</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Sistem Süresi:</span>
                            <span class="info-value" id="uptime">-</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">İşlemci:</span>
                            <span class="info-value" id="cpuModel">-</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Host Adı:</span>
                            <span class="info-value" id="hostname">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/navbar.js"></script>
    <script src="/js/remote.js"></script>
    <script>
        // IP adresini almak için fonksiyon
        async function getLocalIP() {
            try {
                const response = await fetch('http://localhost:5000/api/get-ip');
                if (!response.ok) {
                    throw new Error('IP alınamadı');
                }
                const data = await response.json();
                if (data.ip) {
                    document.getElementById('localIp').textContent = data.ip;
                    document.getElementById('ipAddress').value = data.ip;
                    const scanInput = document.getElementById('scanIpAddress');
                    if (scanInput) scanInput.value = data.ip.substring(0, data.ip.lastIndexOf('.')) + '.0/24';
                }
            } catch (error) {
                console.error('IP alma hatası:', error);
                document.getElementById('localIp').textContent = 'IP alınamadı';
            }
        }

        // Enter tuşu ile komut gönderme
        document.addEventListener('DOMContentLoaded', function() {
            getLocalIP();
            
            const sshInput = document.getElementById('sshCommand');
            if (sshInput) {
                sshInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        sendSSHCommand();
                    }
                });
            }
        });
    </script>
</body>
</html>
